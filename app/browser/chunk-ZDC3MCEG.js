import{a as d}from"./chunk-CXRP5GN6.js";import{Fb as n,J as h,N as o,kc as l,l as a,lc as u,oa as t}from"./chunk-ZWYFQ3XA.js";var m=class{constructor(){this.cost_dollar=0,this.subtotal_dollar=0,this.total_dollar=0,this.discount_dollar=0,this.discount2_dollar=0,this.total_dollar_discount_2=0,this.vat_dollar=0,this.total_qty=0}},f=function(e){return e.unit_price_usd="unit_price_usd",e}(f||{});var C=(()=>{class e{constructor(){this.http=o(n),this.apiService=o(u),this.notificationService=o(l),this.stockService=o(d),this.invoice=t([]),this.signal_submited=t(!1),this.submitCheckoutLoading=t(!1),this.reset$=new a(!1),this.factor=t(1),this.barcodeResponse=new a(null),this.products=this.stockService.products,this.selected_customer_id=t(null),this.payment_amount=t(0),this.operation_type=t("normal"),this.selectedPetId=t(null),this.selectedCustomerPets=t([])}submitBarcode(s){let i=this.products().find(r=>r.barcode==s);i?this.barcodeResponse.next(i):this.notificationService.showError("Item not found!","home")}checkout(s,i){this.signal_submited.set(!0),this.submitCheckoutLoading.set(!0);let r=null;s.customer_id&&i&&(r={amount:i,customer_id:s.customer_id,payment_date:s.order_datetime}),this.http.post(`${this.apiService.host}/sell-orders`,{invoice:s,payment:r}).subscribe({next:c=>{this.notificationService.showSuccess("Order Created Successfully!","home"),c.whatsapp&&this.notificationService.showInfo("Whatsapp sent successfully!","home",!1)},error:c=>{this.notificationService.showError(c.error.message,"home"),this.submitCheckoutLoading.set(!1)},complete:()=>{this.stockService.getItems(),this.invoice.set([]),this.signal_submited.set(!1),this.submitCheckoutLoading.set(!1),this.reset$.next(!0)}})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{m as a,f as b,C as c};
